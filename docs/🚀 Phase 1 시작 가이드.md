---
tags: [프로젝트, 가이드, Phase1, 실행]
type: guide
status: 진행중
creation_date: 2025-10-04
---

# 🚀 Phase 1 시작 가이드

> **현재 상태**: Cursor 스켈레톤 통합 완료 ✅
> **다음 단계**: Apps Script v2.0 적용 및 테스트

---

## 📋 지금까지 완료된 작업

### 1. ✅ 프로젝트 구조 통합

**Cursor 생성 스켈레톤:**
- 위치: `D:\Projects\apartment-automation` (Git 저장소)
- Git 초기화 완료
- 기존 프로젝트 파일 통합 완료

**디렉터리 구조:**
```
D:\Projects\apartment-automation/  (Git 저장소)
├── .git/
├── src/                           # Python 소스 코드
│   ├── collectors/               # 데이터 수집
│   ├── processors/               # 데이터 처리
│   ├── generators/               # 콘텐츠 생성
│   ├── sheets/                   # Google Sheets 연동
│   └── config/                   # 설정 관리
├── apps-script/                   # Google Apps Script
│   ├── 통합_최종_스크립트.js      # 기존 버전
│   └── 통합_최종_스크립트_v2_개선.js  # ✨ Phase 1 개선 버전
├── legacy/                        # 기존 프로젝트 파일
│   ├── sheets-automation/        # 구글 시트 자동화
│   └── pdf-normalization/        # PDF 정규화 스크립트
├── config/                        # 설정 파일
│   ├── settings.yaml             # 시스템 설정
│   ├── credentials.json          # Google 인증 (생성 필요)
│   └── README.md                 # 설정 가이드
├── .env.example                   # 환경 변수 템플릿
├── requirements.txt               # Python 의존성
└── README.md                      # 프로젝트 문서
```

### 2. ✅ 심볼릭 링크 (관리자 권한 필요)

**생성 방법:**
```powershell
# PowerShell 관리자 권한으로 실행
New-Item -ItemType SymbolicLink `
  -Path "d:\Flow System\- Flow\01. Framing\Project\구글 스프레드시트 자동화 매물관리 시스템구축\code" `
  -Target "d:\Projects\apartment-automation"
```

**또는 수동 바로가기:**
- `D:\Projects\apartment-automation` 폴더 우클릭 → 바로가기 만들기
- Obsidian 프로젝트 폴더로 이동하여 이름을 `code`로 변경

### 3. ✅ Apps Script v2.0 개선 완료

**파일**: `apps-script/통합_최종_스크립트_v2_개선.js`

**✨ 적용된 개선사항:**

#### 1) 필수 필드 검증 강화
```javascript
const requiredFields = ['단지명', '동', '호', '타입', '거래유형', '거래상태'];
// 누락 시 명확한 오류 메시지 표시
```

#### 2) 매물ID/고객ID 자동 생성
```javascript
// 매물ID: {단지명축약} {동}-{호}-{타입}
// 예: "두정힐스 101-503-84A"

// 고객ID: {단지명축약} {동}-{호} {O/C}
// 예: "두정힐스 101-503 O" (매도인)
```

#### 3) 중복 등록 방지
```javascript
// 동일 단지명+동+호+타입 체크
// 중복 시 수정 모드 전환 제안
```

#### 4) 접수일/접수자 자동 입력
```javascript
dataMap['접수일'] = new Date();
dataMap['접수자'] = Session.getActiveUser().getEmail().split('@')[0];
```

#### 5) 데이터 타입 표준화
```javascript
// 타입: 문자열로 통일
// 연락처: 010-XXXX-XXXX 형식
```

---

## 🔧 다음 단계: Apps Script v2.0 적용

### Step 1: Google Apps Script 에디터 열기

1. Google Sheets 접속: https://docs.google.com/spreadsheets/d/1tkDKc7RTCLRgYPM-6e3CFEBOsHckLlNmddfKlVUX2rQ/edit
2. 상단 메뉴: **확장 프로그램 > Apps Script**
3. 새 탭에서 Apps Script 에디터 열림

### Step 2: 기존 코드 백업 (선택사항)

1. 기존 코드 전체 복사
2. 임시 파일에 저장 (혹시 모를 롤백용)

### Step 3: 새 코드 적용

1. `D:\Projects\apartment-automation\apps-script\통합_최종_스크립트_v2_개선.js` 파일 열기
2. 전체 코드 복사
3. Apps Script 에디터에 붙여넣기 (기존 코드 완전 교체)
4. **Ctrl + S** 저장

### Step 4: 권한 승인 (최초 1회)

1. 저장 후 실행 버튼(▶) 클릭 또는 함수 선택 실행
2. "권한 검토" 팝업 → **검토** 클릭
3. Google 계정 선택
4. "이 앱은 Google에서 확인하지 않았습니다" → **고급** → **{프로젝트 이름}(으)로 이동** 클릭
5. **허용** 클릭

### Step 5: 트리거 설정 확인

1. Apps Script 에디터 왼쪽 메뉴: **트리거** (⏰) 클릭
2. 기존 `onEdit` 트리거가 있는지 확인
3. 없으면 **+ 트리거 추가**:
   - 실행할 함수: `onEdit`
   - 이벤트 소스: **스프레드시트에서**
   - 이벤트 유형: **수정 시**
   - **저장**

---

## 🧪 테스트 계획

### Test Case 1: 필수 필드 검증

**목표**: 필수 필드 누락 시 오류 메시지 확인

**절차**:
1. 등록검색 시트 이동
2. 단지명, 동, 호만 입력 (타입, 거래유형, 거래상태 미입력)
3. 등록 버튼 클릭
4. **기대 결과**: "다음 필수 항목을 입력해주세요: 타입, 거래유형, 거래상태" 메시지 표시

### Test Case 2: 매물ID 자동 생성

**목표**: 매물ID가 올바른 형식으로 생성되는지 확인

**절차**:
1. 모든 필수 필드 입력:
   - 단지명: 힐스테이트두정역
   - 동: 101
   - 호: 503
   - 타입: 84A
   - 거래유형: 매매
   - 거래상태: 접수
2. 등록 버튼 클릭
3. **기대 결과**:
   - 성공 메시지에 "매물ID: 두정힐스 101-503-84A" 표시
   - 매물DB에 해당 ID 저장 확인

### Test Case 3: 중복 방지

**목표**: 동일 매물 재등록 시 경고 메시지 확인

**절차**:
1. Test Case 2와 동일한 정보 재입력
2. 등록 버튼 클릭
3. **기대 결과**: "이미 등록된 매물입니다" 경고 + 수정 모드 전환 제안

### Test Case 4: 접수일/접수자 자동 입력

**목표**: 빈 필드가 자동으로 채워지는지 확인

**절차**:
1. 새 매물 정보 입력 (접수일, 접수자 비워둠)
2. 등록 버튼 클릭
3. 매물DB 확인
4. **기대 결과**:
   - 접수일: 오늘 날짜
   - 접수자: 현재 사용자 이메일 앞부분

### Test Case 5: 데이터 타입 표준화

**목표**: 타입과 연락처가 올바른 형식으로 저장되는지 확인

**절차**:
1. 타입에 숫자만 입력 (예: 84)
2. 연락처에 하이픈 없는 숫자 입력 (예: 01012345678)
3. 등록 버튼 클릭
4. 매물DB 확인
5. **기대 결과**:
   - 타입: "84" (문자열)
   - 연락처: "010-1234-5678"

---

## 📊 예상 결과

### 개선 전 (현재)
- 필수 필드 누락률: **70%**
- 매물ID 생성률: **10%** (90% 빈 값)
- 중복 등록 오류: **월 3건**
- 데이터 타입 불일치: **자주 발생**

### 개선 후 (목표)
- 필수 필드 누락률: **5%** ✨ (-93%)
- 매물ID 생성률: **100%** ✨ (+900%)
- 중복 등록 오류: **0건** ✨ (-100%)
- 데이터 타입 불일치: **없음** ✨

---

## 🚨 트러블슈팅

### 문제 1: "단지명축약을 찾지 못함" 로그

**원인**: 아파트단지 시트에 해당 단지 정보 없음

**해결책**:
1. 아파트단지 시트 확인
2. 해당 단지명과 단지명축약 추가
3. 또는 스크립트가 자동으로 단지명 앞 2글자 사용 (예: 힐스테이트 → "힐스")

### 문제 2: 권한 오류

**해결책**:
1. Apps Script 에디터에서 다시 권한 승인
2. Google 계정 설정 → 보안 → 보안 수준이 낮은 앱의 액세스 허용

### 문제 3: 트리거가 작동하지 않음

**해결책**:
1. 트리거 삭제 후 재생성
2. 스프레드시트 새로고침
3. 시크릿 모드에서 테스트

---

## 📚 관련 문서

- [[프로젝트 허브]] - 프로젝트 전체 관리
- [[통합 마스터플랜]] - 전체 로드맵
- [[시트 구조 분석 보고서]] - 데이터베이스 스키마
- [[🔗 심볼릭 링크 생성 가이드]] - 개발 환경 설정

---

## 🎯 다음 마일스톤

### Phase 1 Week 1 (현재)
- [x] Cursor 스켈레톤 통합   [completion:: 2025-10-06]
- [x] Apps Script v2.0 개발
- [ ] Apps Script v2.0 배포
- [ ] 10건 신규 매물 테스트 등록
- [ ] 데이터 품질 검증

### Phase 2 Week 2-3 (예정)
- [ ] CSV 자동 임포트 (Python)
- [ ] PDF 파싱 자동화 (Gemini CLI)
- [ ] 웹 크롤링 (네이버 부동산)
- [ ] 공공 API 연동 (실거래가)

### Phase 3 Week 4-5 (예정)
- [ ] 일일 브리핑 자동 생성
- [ ] 마케팅 콘텐츠 자동 생성
- [ ] Instagram 이미지 생성
- [ ] 블로그 자동 포스팅

---

**✨ "작은 개선부터 시작하자. 완벽한 시스템은 그 다음이다!"**

**다음 작업**: Apps Script v2.0 배포 → 테스트 → 데이터 정제
