# Slice로 드롭다운이 안 줄어드는 문제 해결 🚨

**증상**: Slice 조건을 적용해도 단지명 드롭다운에 전체 목록이 표시됨

---

## 🔍 원인 분석

### 핵심 문제

**Slice는 아파트매물 데이터를 필터링하지만**  
**단지명 드롭다운은 `아파트단지` 테이블을 참조합니다!**

```
Slice (배방아이유쉘_전용)
   ↓ 필터링
아파트매물DB
   ├─ 단지A
   ├─ 단지B
   └─ ...

BUT!

단지명 드롭다운
   ↓
아파트단지 테이블 (별도!)
   ├─ 전체 단지1
   ├─ 전체 단지2
   ├─ 전체 단지3
   └─ ... (전체 목록 표시) ❌
```

---

## ✅ 해결 방법 3가지

### 방법 1: Form 뷰에서 Valid_If 오버라이드 (추천) ⭐⭐⭐⭐⭐

**가장 간단하고 폼별로 독립적!**

#### 설정 순서:

```
1. UX → Views → 배방아이유쉘_고객접수 폼 편집

2. 단지명 필드 클릭

3. 아래로 스크롤하여 "Advanced settings" 또는 "Valid If" 찾기

4. Valid If에 입력:
   IN([단지명].[단지명], ["아산배방1단지우방아이유쉘", "아산배방우방아이유쉘2단지"])

5. Save
```

**이렇게 하면**:
- ✅ 이 폼에서만 2개만 표시
- ✅ 다른 폼은 영향 없음
- ✅ 기본 설정 유지

---

### 방법 2: 아파트단지 테이블에 Slice 만들기

**아파트단지 테이블 자체를 필터링**

#### 설정 순서:

```
1. Data → Tables → 아파트단지 선택

2. 우측 상단 "Source" 확인
   → Source: Table (기본)
   → 또는 Slice가 지정되어 있을 수 있음

3. Data → Slices → + New Slice

4. Slice name: 배방아이유쉘_단지전용

5. Detail table: 아파트단지

6. Condition:
   OR(
     [단지명] = "아산배방1단지우방아이유쉘",
     [단지명] = "아산배방우방아이유쉘2단지"
   )

7. Save

8. Data → Tables → 아파트단지 → Source 선택
   Source slice: 배방아이유쉘_단지전용으로 변경

9. ❗️ **주의**: 이렇게 하면 전체 폼에 영향!
   → 다른 폼에서도 2개만 보임

10. 해결책: 배방아이유쉘 폼에만 적용
```

---

### 방법 3: 별도 뷰에서 컬럼 오버라이드 (고급)

**복잡하지만 완전한 분리**

```
□ 뷰별로 다른 테이블 연결
□ 너무 복잡함, 비추천 ❌
```

---

## 🎯 최종 권장: 방법 1 ⭐⭐⭐⭐⭐

### 이유

1. ✅ **가장 간단** (1분 작업)
2. ✅ **폼별 독립적**
3. ✅ **기존 로직 영향 없음**
4. ✅ **유지보수 쉬움**

### 실제 설정 화면:

```
Form: 배방아이유쉘_고객접수
   ↓
필드: 단지명
   ↓ 클릭
Advanced settings
   ↓
Valid If (Field level):
   IN([단지명].[단지명], ["아산배방1단지우방아이유쉘", "아산배방우방아이유쉘2단지"])
   ↓
Save
```

---

## 🧪 테스트

```
□ 배방아이유쉘 폼 열기
□ 단지명 드롭다운 클릭
□ 2개만 표시되는지 확인 ✅

□ 다른 폼(예: 일반 매물등록) 열기
□ 단지명 드롭다운 클릭
□ 전체 목록이 표시되는지 확인 ✅
```

---

## 🚨 주의사항

### Valid_If가 보이지 않는 경우

**Form 편집 모드에서**:
```
□ UX → Views → 폼 편집
□ 필드 목록에서 단지명 선택
□ 아래로 충분히 스크롤
□ "Advanced settings" 또는 "Show advanced" 클릭
□ Valid If 필드 나타남
```

---

### AppSheet 버전별 차이

**최신 버전**:
```
필드 → Settings → Advanced
   → Valid If
```

**구버전**:
```
필드 → Valid If (바로 표시)
```

---

## 💡 추가 팁

### 다른 폼에도 적용하려면

**각 폼별로 Valid_If 설정**:
```
폼1 (배방아이유쉘):
   Valid If: IN([단지명].[단지명], ["아산배방1단지우방아이유쉘", "아산배방우방아이유쉘2단지"])

폼2 (천안아이파크):
   Valid If: IN([단지명].[단지명], ["천안아이파크시티"])

폼3 (전체):
   Valid If: (비워둠, 전체 표시)
```

---

## ✅ 정리

| 방법 | 작업 시간 | 효과 | 추천 |
|------|----------|------|------|
| Form Valid_If | 1분 | 폼별 독립 | ⭐⭐⭐⭐⭐ |
| 아파트단지 Slice | 5분 | 전체 영향 | ⭐⭐ |
| 뷰별 오버라이드 | 15분 | 너무 복잡 | ❌ |

**결론**: Form Valid_If 사용하세요! 🚀

