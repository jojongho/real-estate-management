# 배방아이유쉘 WordPress 폼 - 최종 작업 순서 ✅

**결론**: 아파트매물 Form 기준으로 작업!

---

## ⚡ 3단계로 끝내기

### ✅ 1단계: 고객 Ref 필드 추가 (이미 있어야 함)

```
□ AppSheet 열기
□ Data → Tables → 아파트매물 → Columns

□ "고객" 컬럼이 있나요?
   ✅ 있음 → 2단계로
   ❌ 없음 → 추가:

   □ + Add column
   □ Column name: 고객
   □ Type: Ref
   □ Source table: 고객DB
   □ Label column: 고객성함

   □ 스크롤 다운 → "Is Part Of?" 체크 ✅
   □ Save
```

---

### ✅ 2단계: 별도 공개 Form 뷰 생성

```
□ UX → Views → + Add View

□ View type: Form
□ Detail table: 아파트매물
□ Form name: "배방아이유쉘_고객접수"

□ 필드 배치:
   
   매물 선택 섹션:
   ✅ 단지명 (드롭다운, 2개만)
   ✅ 동 (드롭다운)
   ✅ 호 (드롭다운)
   ✅ 타입 (드롭다운)

   고객 정보 섹션:
   ✅ 고객 (Ref) ← 핵심!
   
   ❌ 분양가 (숨김)
   ❌ 발코니 (숨김)
   ❌ 옵션 (숨김)
   ❌ 다른 모든 필드 숨김

□ Save
```

---

### ✅ 3단계: 단지명 필터링 (2개만)

```
□ Data → Tables → 아파트단지 선택 (또는 분양가 테이블)

□ 방법 1: Valid_If 사용
   □ 아파트매물 → 단지명 컬럼 클릭
   □ Valid If:
     IN([단지명], ["아산배방1단지우방아이유쉘", "아산배방우방아이유쉘2단지"])

□ 방법 2: Enum으로 변경 (더 간단!)
   □ Type: Enum 선택
   □ Values:
     아산배방1단지우방아이유쉘
     아산배방우방아이유쉘2단지
   □ Allow other values: ❌
   □ Save
```

---

### ✅ 4단계: WordPress 임베딩

```
□ UX → Views → 배방아이유쉘_고객접수 선택
□ Share 탭 → Create Form Link
□ 링크 복사

□ WordPress 페이지 편집:
   □ HTML 블록 추가
   
   <iframe 
     src="여기에_링크_붙여넣기"
     width="100%" 
     height="800px"
     frameborder="0">
   </iframe>

□ 저장
```

---

## 🧪 테스트

```
□ WordPress 페이지 열기
□ 폼 표시 확인
□ 단지명 2개만 보이는지 확인 ✅
□ 동/호/타입 드롭다운 작동 확인 ✅
□ "고객" 필드 클릭
   → "+ 새 고객 등록" 버튼 확인 ✅
□ 새 고객 정보 입력
   → 이름, 연락처, 고객구분, 주소
□ 저장
□ 전체 제출
□ AppSheet 고객DB 확인 ✅
□ AppSheet 아파트매물DB 확인 ✅
```

---

## ✅ 완료!

**데이터 흐름**:
```
WordPress 폼
   ↓ 입력
매물 선택 (단지/동/호/타입)
고객 정보 입력
   ↓ 제출
아파트매물DB: 매물 레코드 생성
고객DB: 고객 레코드 생성
   └─ 자동 연결! ✅
```

---

## 🚨 중요한 포인트

1. ✅ **아파트매물 Form 기준으로 작업**
2. ✅ **Is Part Of 활성화 필수**
3. ✅ **기존 동적 드롭다운 활용**
4. ✅ **분양가 등 민감 정보 숨김**
5. ✅ **공개 링크 권한 설정**

---

**시작하세요!** 🚀

